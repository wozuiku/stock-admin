(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-data-now-list"],{"01e8":function(t,n,e){var a=e("24fb");n=a(!1),n.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.del-modal-action[data-v-07b62912]{display:flex;justify-content:space-between;width:100%}.del-modal-action .left[data-v-07b62912]{flex:40%}.del-modal-action .right[data-v-07b62912]{flex:60%;display:flex;justify-content:flex-end}',""]),t.exports=n},"0f11":function(t,n,e){"use strict";e.r(n);var a=e("dc82"),i=e("538c");for(var s in i)"default"!==s&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("244a");var l,c=e("f0c5"),o=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"07b62912",null,!1,a["a"],l);n["default"]=o.exports},"244a":function(t,n,e){"use strict";var a=e("b01b"),i=e.n(a);i.a},"538c":function(t,n,e){"use strict";e.r(n);var a=e("dcb6"),i=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(n,t,(function(){return a[t]}))}(s);n["default"]=i.a},b01b:function(t,n,e){var a=e("01e8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=e("4f06").default;i("49f9e53c",a,!0,{sourceMap:!1,shadowMode:!1})},dc82:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return a}));var a={downloadExcel:e("75be").default,unicloudDb:e("960d").default,uniTable:e("64fd").default,uniTr:e("1808").default,uniTh:e("26dc").default,uniTd:e("7b5b").default,uniIcons:e("48a2").default,uniPagination:e("a7e6").default},i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("v-uni-view",{staticClass:"uni-header"},[e("v-uni-view",{staticClass:"uni-group"},[e("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:t.$t("common.placeholder.query")},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)}},model:{value:t.query,callback:function(n){t.query=n},expression:"query"}}),e("v-uni-button",{staticClass:"uni-button",attrs:{type:"default",size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.search")))]),e("v-uni-button",{staticClass:"uni-button",attrs:{type:"primary",size:"mini",loading:t.syncLoading},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.sync.apply(void 0,arguments)}}},[t._v(t._s(t.syncBtnText))]),e("v-uni-button",{staticClass:"uni-button",attrs:{type:"warn",size:"mini"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.delBatch.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.batchDelete")))]),e("download-excel",{staticClass:"hide-on-phone",attrs:{fields:t.exportExcel.fields,data:t.exportExcelData,type:t.exportExcel.type,name:t.exportExcel.filename}},[e("v-uni-button",{staticClass:"uni-button",attrs:{type:"primary",size:"mini"}},[t._v(t._s(t.$t("common.button.exportExcel")))])],1)],1)],1),e("v-uni-view",{staticClass:"uni-container"},[e("unicloud-db",{ref:"udb",attrs:{collection:"stock-data-now",field:"time,code,name,price,high,low,open,pre_close,bargain_volume,bargain_amount",where:t.where,getcount:!0,"page-size":t.options.pageSize,"page-current":t.options.pageCurrent},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.data,i=n.pagination,s=n.loading,l=n.error;n.options;return[e("uni-table",{ref:"table",attrs:{loading:s,emptyText:l.message||t.$t("common.empty"),border:!0,stripe:!0,type:"selection"},on:{"selection-change":function(n){arguments[0]=n=t.$handleEvent(n),t.selectionChange.apply(void 0,arguments)}}},[e("uni-tr",[e("uni-th",{attrs:{align:"center"}},[t._v("时间")]),e("uni-th",{attrs:{align:"center"}},[t._v("代码")]),e("uni-th",{attrs:{align:"center"}},[t._v("名称")]),e("uni-th",{attrs:{align:"center"}},[t._v("价格")]),e("uni-th",{attrs:{align:"center"}},[t._v("最高价")]),e("uni-th",{attrs:{align:"center"}},[t._v("最低价")]),e("uni-th",{attrs:{align:"center"}},[t._v("开盘价")]),e("uni-th",{attrs:{align:"center"}},[t._v("昨收价")]),e("uni-th",{attrs:{align:"center"}},[t._v("成交量")]),e("uni-th",{attrs:{align:"center"}},[t._v("成交额")]),e("uni-th",{attrs:{align:"center"}},[t._v("操作")])],1),t._l(a,(function(n,a){return e("uni-tr",{key:a},[e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.time))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.code))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.name))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.price))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.high))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.low))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.open))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.pre_close))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.bargain_volume))]),e("uni-td",{attrs:{align:"center"}},[t._v(t._s(n.bargain_amount))]),e("uni-td",{attrs:{align:"center"}},[e("v-uni-view",{staticClass:"uni-group"},[e("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navigateTo("./edit?id="+n._id,!1)}}},[t._v(t._s(t.$t("common.button.edit")))]),e("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmDelete(n._id)}}},[t._v(t._s(t.$t("common.button.delete")))])],1)],1)],1)}))],2),e("v-uni-view",{staticClass:"uni-pagination-box"},[e("v-uni-picker",{staticClass:"select-picker",attrs:{mode:"selector",value:t.pageSizeIndex,range:t.pageSizeOption},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.changeSize.apply(void 0,arguments)}}},[e("v-uni-button",{attrs:{type:"default",size:"mini",plain:!0}},[e("v-uni-text",[t._v(t._s(t.pageSizeOption[t.pageSizeIndex])+" "+t._s(t.$t("common.piecePerPage")))]),e("uni-icons",{staticClass:"select-picker-icon",attrs:{type:"arrowdown",size:"12",color:"#999"}})],1)],1),e("uni-pagination",{attrs:{"show-icon":!0,"page-size":i.size,total:i.count},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.onPageChanged.apply(void 0,arguments)}},model:{value:i.current,callback:function(n){t.$set(i,"current",n)},expression:"pagination.current"}})],1)]}}])}),e("v-uni-view",{staticClass:"cu-modal",class:t.showDelModal?"show":""},[e("v-uni-view",{staticClass:"cu-dialog"},[e("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[e("v-uni-view",{staticClass:"content"},[t._v("批量删除")]),e("v-uni-view",{staticClass:"action",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.hideModal.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),e("v-uni-view",{staticClass:"padding-xl"},[e("v-uni-form",[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("选择日期")]),e("v-uni-picker",{attrs:{mode:"date",value:t.delDate,start:"2015-09-01",end:"2020-09-01"},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.delDateChange.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.delDate))])],1)],1)],1)],1),e("v-uni-view",{staticClass:"cu-bar bg-white"},[e("v-uni-view",{staticClass:"del-modal-action"},[e("v-uni-view",{staticClass:"left"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-button",{staticClass:"cu-btn line-red",attrs:{loading:t.delAllLoading},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.delDataAll.apply(void 0,arguments)}}},[t._v(t._s(t.delAllBtnText))])],1)],1),e("v-uni-view",{staticClass:"right"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-button",{staticClass:"cu-btn line-blue",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")]),e("v-uni-button",{staticClass:"cu-btn bg-blue margin-left",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.delDatabatch.apply(void 0,arguments)}}},[t._v("按日期删除")])],1)],1)],1)],1)],1)],1)],1)],1)},s=[]},dcb6:function(t,n,e){"use strict";(function(t){e("d81d"),e("4d63"),e("ac1f"),e("25f0"),e("841c"),e("498a"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=10,i=1,s={data:function(){return{query:"",where:"",selectedIndexs:[],pageSizeIndex:0,pageSizeOption:[10,20,50,100,500],syncLoading:!1,syncBtnText:"同步",showDelModal:!1,delDate:"2018-12-25",delAllLoading:!1,delAllBtnText:"全部删除",options:{pageSize:a,pageCurrent:i,filterData:{status_localdata:[{text:"正常",value:0,checked:!0},{text:"禁用",value:1},{text:"审核中",value:2},{text:"审核拒绝",value:3}]}},exportExcel:{filename:"stock-now-data.xls",type:"xls",fields:{"时间":"time","代码":"code","名称":"name","价格":"price","最高价":"high","最低价":"low","开盘价":"open","昨天价格":"pre_close","成交量":"bargain_volume","成交额":"bargain_amount"}},exportExcelData:[]}},watch:{pageSizeIndex:{immediate:!0,handler:function(t,n){var e=this;this.options.pageSize=this.pageSizeOption[t],this.options.pageCurrent=1,this.$nextTick((function(){e.loadData()}))}}},methods:{search:function(){var t=this,n=this.getWhere();this.where=n,console.log("search:",this.where),this.$nextTick((function(){t.loadData()}))},sync:function(){var n=this;this.syncLoading=!0,this.syncBtnText="同步中...",t.callFunction({name:"data_cf",data:{type:"sync"}}).then((function(t){console.log("sync res:",t),n.syncLoading=!1,n.syncBtnText="同步",n.search()}))},delBatch:function(){this.showDelModal=!0},hideModal:function(){this.showDelModal=!1},delDateChange:function(){},delDataAll:function(){var n=this;this.delAllLoading=!0,this.delAllBtnText="删除中...",t.callFunction({name:"data_cf",data:{type:"delAll"}}).then((function(t){console.log("delDataAll res:",t),setTimeout((function(){n.delAllLoading=!1,n.delAllBtnText="全部删除",n.search()}),3e3)}))},delDatabatch:function(){},getWhere:function(){var t=this.query.trim();if(!t)return"";var n=new RegExp(t,"i");return dbSearchFields.map((function(t){return n+".test("+t+")"})).join(" || ")},loadData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.udb.loadData({clear:t})},selectionChange:function(t){this.selectedIndexs=t.detail.index},changeSize:function(t){this.pageSizeIndex=t.detail.value},onPageChanged:function(t){this.selectedIndexs.length=0,this.$refs.table.clearSelection(),this.$refs.udb.loadData({current:t.current})}}};n.default=s}).call(this,e("a9ff")["default"])}}]);