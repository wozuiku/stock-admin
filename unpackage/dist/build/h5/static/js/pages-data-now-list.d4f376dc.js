(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-data-now-list"],{"0f11":function(t,e,n){"use strict";n.r(e);var a=n("b730"),i=n("538c");for(var l in i)"default"!==l&&function(t){n.d(e,t,(function(){return i[t]}))}(l);n("a603");var s,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"5f010b20",null,!1,a["a"],s);e["default"]=c.exports},"0f89":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.del-modal-action[data-v-5f010b20]{display:flex;justify-content:space-between;width:100%}.del-modal-action .left[data-v-5f010b20]{flex:40%}.del-modal-action .right[data-v-5f010b20]{flex:60%;display:flex;justify-content:flex-end}',""]),t.exports=e},"538c":function(t,e,n){"use strict";n.r(e);var a=n("dcb6"),i=n.n(a);for(var l in a)"default"!==l&&function(t){n.d(e,t,(function(){return a[t]}))}(l);e["default"]=i.a},a603:function(t,e,n){"use strict";var a=n("bc9b"),i=n.n(a);i.a},b730:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return a}));var a={downloadExcel:n("75be").default,unicloudDb:n("960d").default,uniTable:n("64fd").default,uniTr:n("1808").default,uniTh:n("26dc").default,uniTd:n("7b5b").default,uniIcons:n("48a2").default,uniPagination:n("a7e6").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"uni-header"},[n("v-uni-view",{staticClass:"uni-group"},[n("v-uni-input",{staticClass:"uni-search",attrs:{type:"text",placeholder:t.$t("common.placeholder.query")},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),n("v-uni-button",{staticClass:"uni-button",attrs:{type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.search")))]),n("v-uni-button",{staticClass:"uni-button",attrs:{type:"primary",size:"mini",loading:t.syncLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sync.apply(void 0,arguments)}}},[t._v(t._s(t.syncBtnText))]),n("v-uni-button",{staticClass:"uni-button",attrs:{type:"warn",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delBatch.apply(void 0,arguments)}}},[t._v(t._s(t.$t("common.button.batchDelete")))]),n("download-excel",{staticClass:"hide-on-phone",attrs:{fields:t.exportExcel.fields,data:t.exportExcelData,type:t.exportExcel.type,name:t.exportExcel.filename}},[n("v-uni-button",{staticClass:"uni-button",attrs:{type:"primary",size:"mini"}},[t._v(t._s(t.$t("common.button.exportExcel")))])],1)],1)],1),n("v-uni-view",{staticClass:"uni-container"},[n("unicloud-db",{ref:"udb",attrs:{collection:"stock-data-now",field:"time,date,code,name,price,high,low,open,pre_close,bargain_volume,bargain_amount",where:t.where,getcount:!0,"page-size":t.options.pageSize,"page-current":t.options.pageCurrent},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data,i=e.pagination,l=e.loading,s=e.error;e.options;return[n("uni-table",{ref:"table",attrs:{loading:l,emptyText:s.message||t.$t("common.empty"),border:!0,stripe:!0,type:"selection"},on:{"selection-change":function(e){arguments[0]=e=t.$handleEvent(e),t.selectionChange.apply(void 0,arguments)}}},[n("uni-tr",[n("uni-th",{attrs:{align:"center"}},[t._v("时间")]),n("uni-th",{attrs:{align:"center"}},[t._v("代码")]),n("uni-th",{attrs:{align:"center"}},[t._v("名称")]),n("uni-th",{attrs:{align:"center"}},[t._v("价格")]),n("uni-th",{attrs:{align:"center"}},[t._v("最高价")]),n("uni-th",{attrs:{align:"center"}},[t._v("最低价")]),n("uni-th",{attrs:{align:"center"}},[t._v("开盘价")]),n("uni-th",{attrs:{align:"center"}},[t._v("昨收价")]),n("uni-th",{attrs:{align:"center"}},[t._v("成交量")]),n("uni-th",{attrs:{align:"center"}},[t._v("成交额")]),n("uni-th",{attrs:{align:"center"}},[t._v("操作")])],1),t._l(a,(function(e,a){return n("uni-tr",{key:a},[n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.time))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.code))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.name))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.price))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.high))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.low))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.open))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.pre_close))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.bargain_volume))]),n("uni-td",{attrs:{align:"center"}},[t._v(t._s(e.bargain_amount))]),n("uni-td",{attrs:{align:"center"}},[n("v-uni-view",{staticClass:"uni-group"},[n("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"primary"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.navigateTo("./edit?id="+e._id,!1)}}},[t._v(t._s(t.$t("common.button.edit")))]),n("v-uni-button",{staticClass:"uni-button",attrs:{size:"mini",type:"warn"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.confirmDelete(e._id)}}},[t._v(t._s(t.$t("common.button.delete")))])],1)],1)],1)}))],2),n("v-uni-view",{staticClass:"uni-pagination-box"},[n("v-uni-picker",{staticClass:"select-picker",attrs:{mode:"selector",value:t.pageSizeIndex,range:t.pageSizeOption},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeSize.apply(void 0,arguments)}}},[n("v-uni-button",{attrs:{type:"default",size:"mini",plain:!0}},[n("v-uni-text",[t._v(t._s(t.pageSizeOption[t.pageSizeIndex])+" "+t._s(t.$t("common.piecePerPage")))]),n("uni-icons",{staticClass:"select-picker-icon",attrs:{type:"arrowdown",size:"12",color:"#999"}})],1)],1),n("uni-pagination",{attrs:{"show-icon":!0,"page-size":i.size,total:i.count},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onPageChanged.apply(void 0,arguments)}},model:{value:i.current,callback:function(e){t.$set(i,"current",e)},expression:"pagination.current"}})],1)]}}])}),n("v-uni-view",{staticClass:"cu-modal",class:t.showDelModal?"show":""},[n("v-uni-view",{staticClass:"cu-dialog"},[n("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[n("v-uni-view",{staticClass:"content"},[t._v("批量删除")]),n("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),n("v-uni-view",{staticClass:"padding-xl"},[n("v-uni-form",[n("v-uni-view",{staticClass:"cu-form-group"},[n("v-uni-view",{staticClass:"title"},[t._v("选择日期")]),n("v-uni-picker",{attrs:{mode:"date",value:t.delDate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.delDateChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.delDate))])],1)],1)],1)],1),n("v-uni-view",{staticClass:"cu-bar bg-white"},[n("v-uni-view",{staticClass:"del-modal-action"},[n("v-uni-view",{staticClass:"left"},[n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn line-red",attrs:{loading:t.delAllLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delDataAll.apply(void 0,arguments)}}},[t._v(t._s(t.delAllBtnText))])],1)],1),n("v-uni-view",{staticClass:"right"},[n("v-uni-view",{staticClass:"action"},[n("v-uni-button",{staticClass:"cu-btn line-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")]),n("v-uni-button",{staticClass:"cu-btn bg-blue margin-left",attrs:{loading:t.delDateLoading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delDataDate.apply(void 0,arguments)}}},[t._v(t._s(t.delDateBtnText))])],1)],1)],1)],1)],1)],1)],1)],1)},l=[]},bc9b:function(t,e,n){var a=n("0f89");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("298a343b",a,!0,{sourceMap:!1,shadowMode:!1})},dcb6:function(t,e,n){"use strict";(function(t){n("99af"),n("d81d"),n("4d63"),n("ac1f"),n("25f0"),n("841c"),n("498a"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=["time","date","code","name","price","high","low","open","pre_close","item.bargain_volume","bargain_amount"],i=10,l=1,s={data:function(){return{query:"",where:"",selectedIndexs:[],pageSizeIndex:0,pageSizeOption:[10,20,50,100,500],syncLoading:!1,syncBtnText:"同步",showDelModal:!1,delDate:this.getDate(),delDateLoading:!1,delDateBtnText:"按日期删除",delAllLoading:!1,delAllBtnText:"全部删除",options:{pageSize:i,pageCurrent:l,filterData:{status_localdata:[{text:"正常",value:0,checked:!0},{text:"禁用",value:1},{text:"审核中",value:2},{text:"审核拒绝",value:3}]}},exportExcel:{filename:"stock-now-data.xls",type:"xls",fields:{"时间":"time","代码":"code","名称":"name","价格":"price","最高价":"high","最低价":"low","开盘价":"open","昨天价格":"pre_close","成交量":"bargain_volume","成交额":"bargain_amount"}},exportExcelData:[]}},watch:{pageSizeIndex:{immediate:!0,handler:function(t,e){var n=this;this.options.pageSize=this.pageSizeOption[t],this.options.pageCurrent=1,this.$nextTick((function(){n.loadData()}))}}},methods:{search:function(){var t=this,e=this.getWhere();this.where=e,console.log("search:",this.where),this.$nextTick((function(){t.loadData()}))},sync:function(){var e=this;this.syncLoading=!0,this.syncBtnText="同步中...",t.callFunction({name:"data_cf",data:{type:"sync"}}).then((function(t){console.log("sync res:",t),e.syncLoading=!1,e.syncBtnText="同步",e.search()}))},delBatch:function(){this.showDelModal=!0},hideModal:function(){this.showDelModal=!1},getDate:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return n=n>9?n:"0"+n,a=a>9?a:"0"+a,"".concat(e,"-").concat(n,"-").concat(a)},delDateChange:function(t){this.delDate=t.target.value},delDataAll:function(){var e=this;this.delAllLoading=!0,this.delAllBtnText="删除...",t.callFunction({name:"data_cf",data:{type:"delAll"}}).then((function(t){console.log("delDataAll res:",t),setTimeout((function(){e.delAllLoading=!1,e.delAllBtnText="全部删除",e.search()}),1e3)}))},delDataDate:function(){var e=this;console.log("this.delDate:",this.delDate),this.delDateLoading=!0,this.delDateBtnText="删除...",t.callFunction({name:"data_cf",data:{type:"delDate",date:this.delDate}}).then((function(t){console.log("delDate res:",t),setTimeout((function(){e.delDateLoading=!1,e.delDateBtnText="按日期删除",e.search()}),200)}))},getWhere:function(){var t=this.query.trim();if(!t)return"";var e=new RegExp(t,"i");return a.map((function(t){return e+".test("+t+")"})).join(" || ")},loadData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.udb.loadData({clear:t})},selectionChange:function(t){this.selectedIndexs=t.detail.index},changeSize:function(t){this.pageSizeIndex=t.detail.value},onPageChanged:function(t){this.selectedIndexs.length=0,this.$refs.table.clearSelection(),this.$refs.udb.loadData({current:t.current})}}};e.default=s}).call(this,n("a9ff")["default"])}}]);